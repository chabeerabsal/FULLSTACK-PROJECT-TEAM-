<div class="reports-container">
  
  <!-- Page Header -->
  <div class="page-header mb-4">
    <h1>Reports</h1>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <p>Loading reports...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !isLoading" class="alert alert-danger">
    {{ error }}
    <button (click)="loadReports()" class="btn btn-sm btn-primary ms-3">Retry</button>
  </div>

  <!-- Reports Content -->
  <div *ngIf="!isLoading && !error">
    
    <!-- Summary Cards -->
    <div class="summary-grid mb-4">
      <div class="summary-card income-card">
        <span class="label">Total Income</span>
        <span class="amount">{{ formatCurrency(totalIncome) }}</span>
      </div>
      <div class="summary-card expense-card">
        <span class="label">Total Expenses</span>
        <span class="amount">{{ formatCurrency(totalExpenses) }}</span>
      </div>
      <div class="summary-card profit-card">
        <span class="label">Net Profit/Loss</span>
        <span class="amount" [class.negative]="netProfit < 0">
          {{ formatCurrency(netProfit) }}
        </span>
      </div>
    </div>

    <!-- Monthly Report -->
    <div class="card mb-4">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h2 class="mb-0">Monthly Summary</h2>
        <button (click)="exportToExcel()" class="btn btn-success btn-sm">
          Export to Excel
        </button>
      </div>
      <div class="card-body">
        
        <div *ngIf="monthlyReports.length === 0" class="empty-state text-center py-5">
          <p class="text-muted">No data available</p>
        </div>

        <div *ngIf="monthlyReports.length > 0" class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>Month</th>
                <th>Income</th>
                <th>Expenses</th>
                <th>Profit/Loss</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let report of monthlyReports">
                <td class="fw-bold">{{ report.month }}</td>
                <td class="text-success">{{ formatCurrency(report.income) }}</td>
                <td class="text-danger">{{ formatCurrency(report.expenses) }}</td>
                <td [class]="report.profit >= 0 ? 'text-primary fw-bold' : 'text-danger fw-bold'">
                  {{ formatCurrency(report.profit) }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Category-wise Expenses -->
    <div class="card" *ngIf="categoryReports.length > 0">
      <div class="card-header">
        <h2 class="mb-0">Expenses by Category</h2>
      </div>
      <div class="card-body">
        <div class="category-list">
          <div *ngFor="let category of categoryReports" class="category-item">
            <div class="category-info">
              <span class="category-name">{{ category.category }}</span>
              <span class="category-percentage">{{ category.percentage }}%</span>
            </div>
            <div class="progress" style="height: 25px;">
              <div 
                class="progress-bar bg-danger" 
                [style.width.%]="category.percentage"
                role="progressbar"
              >
                {{ formatCurrency(category.amount) }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

</div>